@model IEnumerable<Vidly.Models.Movie>

@{
    ViewBag.Title = "Movies";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Movies</h2>

<table id="moviestable"class="table table-bordered table-hover">
    <thead>
    <tr>
        <th>Movie</th>
        <th>Genre</th>
    </tr>
    </thead>
    <tbody>
    </tbody>
</table>

@section scripts
{
    <script>
        $(document)
            .ready(function() {
                //The below function applies DataTables plugin to the movies table.
                var table = $("#moviestable")
                    .DataTable({
                        ajax: {
                            url: "/api/moviesapi",
                            dataSrc: "" //Blank because this url itself already has the movie data.

                        },
                        columns: [
                            {
//FIRST COLUMN HERE (Movie Column). This code gets the data field from the JSON itself. To access JSON props, just do name.prop e.g. genre.name
                                data: "name"
                            },
                            { //SECOND COLUMN HERE (Genre column)
                                data: "genre.name"
                            }
                        ]
                    });
            })

    </script>
}